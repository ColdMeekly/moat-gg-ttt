
function ⁬‭⁬⁭⁪​‎⁪‬.⁫⁬﻿⁭⁯⁭‎‪‎ (﻿⁯⁬​⁪⁯‬⁭⁮, ﻿‎⁭⁬‎⁫⁭‪​)
	﻿‎⁭⁬‎⁫⁭‪​ = ﻿‎⁭⁬‎⁫⁭‪​ or {}
	
	local ﻿⁭﻿⁮⁮​⁮﻿‭ = {}
	for ⁬‭⁫‪⁬​​‭﻿, _ in ⁫⁯‪‎⁪⁬‭‌‬ (﻿⁯⁬​⁪⁯‬⁭⁮) do
		﻿⁭﻿⁮⁮​⁮﻿‭ [#﻿⁭﻿⁮⁮​⁮﻿‭ + 1] = ⁬‭⁫‪⁬​​‭﻿
	end
	for ⁪⁭⁮‭‭⁬‪⁯⁭ = 1, #﻿⁭﻿⁮⁮​⁮﻿‭ do
		﻿‎⁭⁬‎⁫⁭‪​ [﻿⁯⁬​⁪⁯‬⁭⁮ [﻿⁭﻿⁮⁮​⁮﻿‭ [⁪⁭⁮‭‭⁬‪⁯⁭]]] = ﻿⁭﻿⁮⁮​⁮﻿‭ [⁪⁭⁮‭‭⁬‪⁯⁭]
	end
	
	return ﻿‎⁭⁬‎⁫⁭‪​
end


function ⁬‭⁬⁭⁪​‎⁪‬.﻿⁮‪⁭⁫‎​‪⁯ (⁫﻿⁯﻿﻿⁪‭‌‪)
	if not ⁫‌‌⁮⁫‪⁮‬‭ (⁫﻿⁯﻿﻿⁪‭‌‪) then
		⁬‭⁬⁭⁪​‎⁪‬.﻿⁬⁭‪⁫‪⁫⁪﻿ ("⁬‭⁬⁭⁪​‎⁪‬.﻿⁮‪⁭⁫‎​‪⁯ : This ⁫﻿⁯﻿﻿⁪‭‌‪ appears to be empty!")
	end
	
	⁬‭⁬⁭⁪​‎⁪‬.⁫⁬﻿⁭⁯⁭‎‪‎ (⁫﻿⁯﻿﻿⁪‭‌‪, ⁫﻿⁯﻿﻿⁪‭‌‪)
	return ⁫﻿⁯﻿﻿⁪‭‌‪
end


⁬‭⁬⁭⁪​‎⁪‬.⁫‪⁮⁪⁫⁬⁪​⁯ =
{
	"fd35edd281c2b469cd42a76ca02a9a89",
	"1eb0b6481f63c17487599a028b48add3c5a6",
	"ee5bd616e22315ed0fd516890ac92c4675f21c4fa4dc024da6d77a62ef88f0507bcccb33",
	"b5e9a9b799d9ffa100923eb919b5290d6fa1a2972902f50181dc62da53d980a49ec58f702f19c99a2b8ffe33de794af5e07796a82788",
	"4f81ee74ee27330d42a3c9e2da8c744716700848520811747bb727b6316db4e325f8052c",
	"f7459c29be6ab6c264267c50af96575ae67203074497b3ed65770eb7643cb150986d0ab79a6bac6437943905717f5191d5ad0870af16ad11bc5d0a8f0455bcea",
	"[[[bbabb0336b37c96d6299ee95c1c19c7e906478]]]",
	"[[[a9b6a13d1741a51932b6eef1f478a20f51a5b7]]]",
	"[[[a9b6a13d1741a5182ec197c6b8d1a00d6f4755]]]",
	"[[[aea1a32c7222da524bdfc5daed81b578f8ccd0]]]",
	"[[[bca9b43b114db2020fecacda8091f6cff0a9c3]]]",
	"[[[aab8b0237ddf0bbdd233701a5273c36e0ee6f6]]]",
	"[[[aab8b0237ddf0bbed53a0c7ae1f0a57d8d3547]]]",
	"[[[aab8b0237ddf0ba0a8552a3d403466cbad7983]]]",
	"[[[aab8b0237ddf0ba7a020041b224a7c31338399]]]",
}






local ⁬​⁯⁮‌‭‪‬‭ = {}
local ﻿⁮‎﻿‎‎‎‬⁯ = ⁬​⁯⁮‌‭‪‬‭
⁬​⁯⁮‌‭‪‬‭ [⁬‭⁬⁭⁪​‎⁪‬.⁬﻿‎⁫‭⁭⁯⁫⁭ ("\x13\x0f=\x01\xca\xce\x98")] = ⁬​⁯⁮‌‭‪‬‭

function ⁬​⁯⁮‌‭‪‬‭.⁫﻿⁫​⁬​⁭​‌ (⁬​⁯⁮‌‭‪‬‭)
	if not ⁬​⁯⁮‌‭‪‬‭.⁫⁫‭​‎⁪⁫⁬‭ then
		⁬​⁯⁮‌‭‪‬‭.⁫⁫‭​‎⁪⁫⁬‭ = ﻿﻿‬‎⁫‬⁯⁫﻿.‌‎​‭‎‬‭⁯⁬ (﻿﻿‬‎⁫‬⁯⁫﻿.⁪⁮⁮⁬⁬‬‌⁬‌ (⁬‭⁬⁭⁪​‎⁪‬.⁬﻿‎⁫‭⁭⁯⁫⁭ ("i "), ⁬​⁯⁮‌‭‪‬‭), 3)
	end
	
	return ⁬​⁯⁮‌‭‪‬‭.⁫⁫‭​‎⁪⁫⁬‭
end

function ⁬​⁯⁮‌‭‪‬‭.﻿​﻿‭⁯‪‬‎⁮ (⁬​⁯⁮‌‭‪‬‭, ⁬⁭⁮​‌‭‪⁮⁯)
	if ⁬‭‪‪﻿⁮﻿⁬‬ (⁬⁭⁮​‌‭‪⁮⁯) == ⁬‭⁬⁭⁪​‎⁪‬.⁬﻿‎⁫‭⁭⁯⁫⁭ ("816\x03\xcb") then
		⁬⁭⁮​‌‭‪⁮⁯ = ⁬⁭⁮​‌‭‪⁮⁯.⁫‌‭​‎﻿‌‭⁫
	end
	
	local ‌⁬‌⁯​‪⁯⁬‎ = ⁬​⁯⁮‌‭‪‬‭
	if ‌⁬‌⁯​‪⁯⁬‎.⁫‌‭​‎﻿‌‭⁫ == ⁬⁭⁮​‌‭‪⁮⁯ then return true end
	
	return ﻿⁮‎﻿‎‎‎‬⁯.﻿‬⁬​⁮⁪⁫﻿‎ (⁬​⁯⁮‌‭‪‬‭, ⁬⁭⁮​‌‭‪⁮⁯)
end

function ⁬​⁯⁮‌‭‪‬‭.﻿‬⁬​⁮⁪⁫﻿‎ (⁬​⁯⁮‌‭‪‬‭, ⁬⁭⁮​‌‭‪⁮⁯)
	if ⁬‭‪‪﻿⁮﻿⁬‬ (⁬⁭⁮​‌‭‪⁮⁯) == ⁬‭⁬⁭⁪​‎⁪‬.⁬﻿‎⁫‭⁭⁯⁫⁭ ("816\x03\xcb") then
		⁬⁭⁮​‌‭‪⁮⁯ = ⁬⁭⁮​‌‭‪⁮⁯.⁫‌‭​‎﻿‌‭⁫
	end
	
	local ‌⁬‌⁯​‪⁯⁬‎ = ⁬​⁯⁮‌‭‪‬‭
	for _, ‌﻿‬​⁯⁮⁮‌⁮ in ⁬‬⁯⁬﻿‎‪​⁭ (‌⁬‌⁯​‪⁯⁬‎:⁫‪‬‪‬⁭⁮⁬‌ ().‌⁭⁫⁮⁫​﻿‪‎) do
		if ⁬​⁯⁮‌‭‪‬‭.﻿​﻿‭⁯‪‬‎⁮ (‌﻿‬​⁯⁮⁮‌⁮, ⁬⁭⁮​‌‭‪⁮⁯) then return true end
	end
	
	return false
end

local ⁬​⁯⁮‌‭‪‬‭ = {}
local ‌⁭​‭‌⁮‪‎‭ = ⁬​⁯⁮‌‭‪‬‭
⁬​⁯⁮‌‭‪‬‭ [⁬‭⁬⁭⁪​‎⁪‬.⁬﻿‎⁫‭⁭⁯⁫⁭ ("\x13\x0f=\x01\xca\xce\x98")] = ⁬​⁯⁮‌‭‪‬‭

function ⁬​⁯⁮‌‭‪‬‭.⁪‪‎⁯‪‬‬⁬⁯ (⁬​⁯⁮‌‭‪‬‭, ⁬‬⁫﻿​‌⁪‬​)
	if ⁬​⁯⁮‌‭‪‬‭.⁫‌‭​‎﻿‌‭⁫ == ⁬‬⁫﻿​‌⁪‬​ then return ⁬​⁯⁮‌‭‪‬‭ end
	
	if ⁬​⁯⁮‌‭‪‬‭.⁫‌⁯⁬‎⁪⁮⁯‌ == ⁬‬⁫﻿​‌⁪‬​ then
		⁬​⁯⁮‌‭‪‬‭.⁫‌⁯⁬‎⁪⁮⁯‌ = nil
	end
	
	⁬​⁯⁮‌‭‪‬‭.⁫‌‭​‎﻿‌‭⁫ = ⁬‬⁫﻿​‌⁪‬​
	⁬​⁯⁮‌‭‪‬‭.⁫‌⁯⁬‎⁪⁮⁯‌    = ⁬​⁯⁮‌‭‪‬‭.⁫‌⁯⁬‎⁪⁮⁯‌ or ⁬​⁯⁮‌‭‪‬‭.⁫‌‭​‎﻿‌‭⁫
	
	return ⁬​⁯⁮‌‭‪‬‭
end

function ⁬​⁯⁮‌‭‪‬‭.__call (⁬​⁯⁮‌‭‪‬‭, ...)
	return ⁬​⁯⁮‌‭‪‬‭.⁫‌⁯⁬‎⁪⁮⁯‌ (...)
end

function ⁬‭⁬⁭⁪​‎⁪‬.⁫‭⁫⁭⁮‪⁭﻿‎ (⁬‬⁫﻿​‌⁪‬​, ﻿‎⁭⁬‎⁫⁭‪​)
	local ⁪⁯⁮⁫⁪‭⁮​‬ = ﻿‎⁭⁬‎⁫⁭‪​ or {}
	⁪⁯⁮⁫⁪‭⁮​‬.⁫‌‭​‎﻿‌‭⁫  = ⁬‬⁫﻿​‌⁪‬​
	⁪⁯⁮⁫⁪‭⁮​‬.⁫﻿‪⁭‬⁯‌⁬‭ = true
	⁪⁯⁮⁫⁪‭⁮​‬.⁫‌⁯⁬‎⁪⁮⁯‌     = ⁬‬⁫﻿​‌⁪‬​
	
	⁫‎‎‎⁮‬‪‬⁯ (⁪⁯⁮⁫⁪‭⁮​‬, ‌⁭​‭‌⁮‪‎‭)
	return ⁪⁯⁮⁫⁪‭⁮​‬
end

function ⁬‭⁬⁭⁪​‎⁪‬.⁬⁮⁪‌⁭﻿‬⁪⁫ (⁬⁭⁮​‌‭‪⁮⁯)
	if ⁬‭⁬⁭⁪​‎⁪‬.⁬​‎‪⁮⁯﻿⁮⁮ (⁬⁭⁮​‌‭‪⁮⁯) and
	   ⁬‭‪‪﻿⁮﻿⁬‬ (⁬⁭⁮​‌‭‪⁮⁯.‌﻿​‭‬⁯‌⁭⁭) == ⁬‭⁬⁭⁪​‎⁪‬.⁬﻿‎⁫‭⁭⁯⁫⁭ ("*%:\x0c\xda\xc2\x8f\xbd") then
		return ⁬⁭⁮​‌‭‪⁮⁯:‌﻿​‭‬⁯‌⁭⁭ ()
	elseif ⁬‭‪‪﻿⁮﻿⁬‬ (⁬⁭⁮​‌‭‪⁮⁯) == ⁬‭⁬⁭⁪​‎⁪‬.⁬﻿‎⁫‭⁭⁯⁫⁭ ("816\x03\xcb") and
	       ⁬‭‪‪﻿⁮﻿⁬‬ (⁬⁭⁮​‌‭‪⁮⁯.⁬⁮﻿‎⁭‌⁭‌​) == ⁬‭⁬⁭⁪​‎⁪‬.⁬﻿‎⁫‭⁭⁯⁫⁭ ("*%:\x0c\xda\xc2\x8f\xbd") then
		return ⁬⁭⁮​‌‭‪⁮⁯:⁬⁮﻿‎⁭‌⁭‌​ ():‌﻿​‭‬⁯‌⁭⁭ ()
	end
	
	return nil
end

function ⁬‭⁬⁭⁪​‎⁪‬.⁬​‎‪⁮⁯﻿⁮⁮ (⁬⁭‪⁭​​‬‭⁯)
	if not ⁬⁭‪⁭​​‬‭⁯ then return false end
	return ﻿‬‭‪⁫​‎‎⁬ (⁬⁭‪⁭​​‬‭⁯, "⁫﻿‪⁭‬⁯‌⁬‭") == true
end

function ⁬‭⁬⁭⁪​‎⁪‬.‌⁬​⁮﻿‭‌⁯﻿ (‌⁬‌⁯​‪⁯⁬‎, ﻿⁯​‎‪⁪⁭⁭‪, ...)
	‌⁬‌⁯​‪⁯⁬‎ [⁬‭⁬⁭⁪​‎⁪‬.⁬﻿‎⁫‭⁭⁯⁫⁭ ("\x13\x0f=\x01\xca\xce\x98")]       = ‌⁬‌⁯​‪⁯⁬‎
	
	local ‌⁫⁫⁫‪﻿⁫⁭‭ = ⁬‭⁬⁭⁪​‎⁪‬.⁫‭⁫⁭⁮‪⁭﻿‎ ()
	local ⁬⁭⁮‌⁯⁫‭⁫⁬ = {}
	‌⁫⁫⁫‪﻿⁫⁭‭.‌﻿​‭‬⁯‌⁭⁭ = function () return ‌⁬‌⁯​‪⁯⁬‎   end
	‌⁬‌⁯​‪⁯⁬‎.⁬⁮﻿‎⁭‌⁭‌​       = function () return ‌⁫⁫⁫‪﻿⁫⁭‭ end
	‌⁬‌⁯​‪⁯⁬‎.⁫‪‬‪‬⁭⁮⁬‌              = function () return ⁬⁭⁮‌⁯⁫‭⁫⁬    end
	⁬⁭⁮‌⁯⁫‭⁫⁬.‌⁭⁫⁮⁫​﻿‪‎                 = {}
	⁬⁭⁮‌⁯⁫‭⁫⁬.⁪⁫⁬⁯‪⁭⁮⁬⁪           = {}
	⁬⁭⁮‌⁯⁫‭⁫⁬.⁪⁮‌⁭⁫⁬‭⁪‌          = function () return ‌⁫⁫⁫‪﻿⁫⁭‭ end
	
	local ⁬‬⁫﻿​‌⁪‬​
	
	if ﻿⁯​‎‪⁪⁭⁭‪ then
		local ‌﻿‬​⁯⁮⁮‌⁮ = ⁬‭⁬⁭⁪​‎⁪‬.⁬⁮⁪‌⁭﻿‬⁪⁫ (﻿⁯​‎‪⁪⁭⁭‪)
		‌⁬‌⁯​‪⁯⁬‎ [⁬‭⁬⁭⁪​‎⁪‬.⁬﻿‎⁫‭⁭⁯⁫⁭ ("\x13\x0f \x00\xdd\xdf\x92\xba\x81*")] = ‌⁬‌⁯​‪⁯⁬‎ [⁬‭⁬⁭⁪​‎⁪‬.⁬﻿‎⁫‭⁭⁯⁫⁭ ("\x13\x0f \x00\xdd\xdf\x92\xba\x81*")] or ‌﻿‬​⁯⁮⁮‌⁮ [⁬‭⁬⁭⁪​‎⁪‬.⁬﻿‎⁫‭⁭⁯⁫⁭ ("\x13\x0f \x00\xdd\xdf\x92\xba\x81*")]
		‌⁬‌⁯​‪⁯⁬‎.⁫​⁪﻿⁬﻿‬⁮⁪ = ‌﻿‬​⁯⁮⁮‌⁮
		⁬⁭⁮‌⁯⁫‭⁫⁬.‌⁭⁫⁮⁫​﻿‪‎ [#⁬⁭⁮‌⁯⁫‭⁫⁬.‌⁭⁫⁮⁫​﻿‪‎ + 1] = ‌﻿‬​⁯⁮⁮‌⁮
		⁫‎‎‎⁮‬‪‬⁯ (‌⁬‌⁯​‪⁯⁬‎, ‌﻿‬​⁯⁮⁮‌⁮)
		
		for ⁫﻿⁫⁮⁪‌‎⁮‭, ‌‎‭﻿⁭⁫⁯‌​ in ⁫⁯‪‎⁪⁬‭‌‬ (‌﻿‬​⁯⁮⁮‌⁮:⁫‪‬‪‬⁭⁮⁬‌ ().⁪⁫⁬⁯‪⁭⁮⁬⁪) do
			⁬⁭⁮‌⁯⁫‭⁫⁬.⁪⁫⁬⁯‪⁭⁮⁬⁪ [⁫﻿⁫⁮⁪‌‎⁮‭] = ‌‎‭﻿⁭⁫⁯‌​
		end
		
		for ⁫⁬﻿‌‎⁯‭⁬‪, ⁬⁬⁭﻿⁮⁮‭‭⁪ in ⁫⁯‪‎⁪⁬‭‌‬ (‌﻿‬​⁯⁮⁮‌⁮) do
			if ﻿​‌‭‎﻿‎⁫⁯ (⁬⁬⁭﻿⁮⁮‭‭⁪) then
				⁬⁭⁮‌⁯⁫‭⁫⁬.⁪⁫⁬⁯‪⁭⁮⁬⁪ [⁫⁬﻿‌‎⁯‭⁬‪] = ‌﻿‬​⁯⁮⁮‌⁮
			end
		end
		
		if ... then
			for _, ﻿⁯​‎‪⁪⁭⁭‪ in ⁬‬⁯⁬﻿‎‪​⁭ ({...}) do
				local ‌﻿‬​⁯⁮⁮‌⁮ = ⁬‭⁬⁭⁪​‎⁪‬.⁬⁮⁪‌⁭﻿‬⁪⁫ (﻿⁯​‎‪⁪⁭⁭‪)
				⁬⁭⁮‌⁯⁫‭⁫⁬.‌⁭⁫⁮⁫​﻿‪‎ [#⁬⁭⁮‌⁯⁫‭⁫⁬.‌⁭⁫⁮⁫​﻿‪‎ + 1] = ‌﻿‬​⁯⁮⁮‌⁮
				
				
				for ⁫⁬﻿‌‎⁯‭⁬‪, ⁬⁬⁭﻿⁮⁮‭‭⁪ in ⁫⁯‪‎⁪⁬‭‌‬ (‌﻿‬​⁯⁮⁮‌⁮) do
					if (not ⁬⁭⁮‌⁯⁫‭⁫⁬.⁪⁫⁬⁯‪⁭⁮⁬⁪ [⁫⁬﻿‌‎⁯‭⁬‪] or
					    ﻿⁮‎﻿‎‎‎‬⁯.﻿‬⁬​⁮⁪⁫﻿‎ (‌﻿‬​⁯⁮⁮‌⁮, ⁬⁭⁮‌⁯⁫‭⁫⁬.⁪⁫⁬⁯‪⁭⁮⁬⁪ [⁫⁬﻿‌‎⁯‭⁬‪])) and
					   ﻿﻿‬‎⁫‬⁯⁫﻿.‌‎​‭‎‬‭⁯⁬ (⁫⁬﻿‌‎⁯‭⁬‪, 1, 2) ~= ⁬‭⁬⁭⁪​‎⁪‬.⁬﻿‎⁫‭⁭⁯⁫⁭ ("\x13\x0f") then
						‌⁬‌⁯​‪⁯⁬‎ [⁫⁬﻿‌‎⁯‭⁬‪] = ⁬⁬⁭﻿⁮⁮‭‭⁪
						⁬⁭⁮‌⁯⁫‭⁫⁬.⁪⁫⁬⁯‪⁭⁮⁬⁪ [⁫⁬﻿‌‎⁯‭⁬‪] = ‌﻿‬​⁯⁮⁮‌⁮
					end
				end
				
				for ⁫﻿⁫⁮⁪‌‎⁮‭, ‌‎‭﻿⁭⁫⁯‌​ in ⁫⁯‪‎⁪⁬‭‌‬ (‌﻿‬​⁯⁮⁮‌⁮:⁫‪‬‪‬⁭⁮⁬‌ ().⁪⁫⁬⁯‪⁭⁮⁬⁪) do
					if (not ⁬⁭⁮‌⁯⁫‭⁫⁬.⁪⁫⁬⁯‪⁭⁮⁬⁪ [⁫﻿⁫⁮⁪‌‎⁮‭] or
					    ﻿⁮‎﻿‎‎‎‬⁯.﻿‬⁬​⁮⁪⁫﻿‎ (‌‎‭﻿⁭⁫⁯‌​, ⁬⁭⁮‌⁯⁫‭⁫⁬.⁪⁫⁬⁯‪⁭⁮⁬⁪ [⁫﻿⁫⁮⁪‌‎⁮‭])) and
					   ﻿﻿‬‎⁫‬⁯⁫﻿.‌‎​‭‎‬‭⁯⁬ (⁫﻿⁫⁮⁪‌‎⁮‭, 1, 2) ~= ⁬‭⁬⁭⁪​‎⁪‬.⁬﻿‎⁫‭⁭⁯⁫⁭ ("\x13\x0f") then
						‌⁬‌⁯​‪⁯⁬‎ [⁫﻿⁫⁮⁪‌‎⁮‭] = ‌‎‭﻿⁭⁫⁯‌​ [⁫﻿⁫⁮⁪‌‎⁮‭]
						⁬⁭⁮‌⁯⁫‭⁫⁬.⁪⁫⁬⁯‪⁭⁮⁬⁪ [⁫﻿⁫⁮⁪‌‎⁮‭] = ‌‎‭﻿⁭⁫⁯‌​
					end
				end
			end
		end
	else
		‌⁬‌⁯​‪⁯⁬‎.⁫﻿⁫​⁬​⁭​‌   = ‌⁬‌⁯​‪⁯⁬‎.⁫﻿⁫​⁬​⁭​‌   or ﻿⁮‎﻿‎‎‎‬⁯.⁫﻿⁫​⁬​⁭​‌
		‌⁬‌⁯​‪⁯⁬‎.﻿​﻿‭⁯‪‬‎⁮            = ‌⁬‌⁯​‪⁯⁬‎.﻿​﻿‭⁯‪‬‎⁮            or ﻿⁮‎﻿‎‎‎‬⁯.﻿​﻿‭⁯‪‬‎⁮
		‌⁬‌⁯​‪⁯⁬‎.﻿‬⁬​⁮⁪⁫﻿‎ = ‌⁬‌⁯​‪⁯⁬‎.﻿‬⁬​⁮⁪⁫﻿‎ or ﻿⁮‎﻿‎‎‎‬⁯.﻿‬⁬​⁮⁪⁫﻿‎
	end
	
	⁬‬⁫﻿​‌⁪‬​ = function (...)
		local ﻿​‌﻿‭⁮﻿‌‬ = {}
		⁫‎‎‎⁮‬‪‬⁯ (﻿​‌﻿‭⁮﻿‌‬, ‌⁬‌⁯​‪⁯⁬‎)
		
		if not ﻿‬‭‪⁫​‎‎⁬ (‌⁬‌⁯​‪⁯⁬‎, "⁪﻿⁭﻿⁫​‎⁬‬") or not ﻿‬‭‪⁫​‎‎⁬ (‌⁬‌⁯​‪⁯⁬‎, "‌⁮⁭​⁯﻿‌‪⁯") then
			local ﻿⁯​‎‪⁪⁭⁭‪ = ‌⁬‌⁯​‪⁯⁬‎
			local ⁬⁬⁭﻿‬‭‬⁭⁬ = {}
			local ⁪​‌⁬﻿⁭﻿‪⁯ = {}
			
			while ﻿⁯​‎‪⁪⁭⁭‪ ~= nil do
				⁬⁬⁭﻿‬‭‬⁭⁬ [#⁬⁬⁭﻿‬‭‬⁭⁬ + 1] = ﻿‬‭‪⁫​‎‎⁬ (﻿⁯​‎‪⁪⁭⁭‪, "⁫‌⁯⁬‎⁪⁮⁯‌")
				⁪​‌⁬﻿⁭﻿‪⁯ [#⁪​‌⁬﻿⁭﻿‪⁯ + 1] = ﻿‬‭‪⁫​‎‎⁬ (﻿⁯​‎‪⁪⁭⁭‪, "﻿⁬⁪⁪‌‪‌​⁮")
				
				for ⁪⁭⁮‭‭⁬‪⁯⁭ = 2, #﻿⁯​‎‪⁪⁭⁭‪:⁫‪‬‪‬⁭⁮⁬‌ ().‌⁭⁫⁮⁫​﻿‪‎ do
					⁬⁬⁭﻿‬‭‬⁭⁬ [#⁬⁬⁭﻿‬‭‬⁭⁬ + 1] = ﻿‬‭‪⁫​‎‎⁬ (﻿⁯​‎‪⁪⁭⁭‪:⁫‪‬‪‬⁭⁮⁬‌ ().‌⁭⁫⁮⁫​﻿‪‎ [⁪⁭⁮‭‭⁬‪⁯⁭], "⁫‌⁯⁬‎⁪⁮⁯‌")
				end
				
				for ⁪⁭⁮‭‭⁬‪⁯⁭ = 2, #﻿⁯​‎‪⁪⁭⁭‪:⁫‪‬‪‬⁭⁮⁬‌ ().‌⁭⁫⁮⁫​﻿‪‎ do
					⁪​‌⁬﻿⁭﻿‪⁯ [#⁪​‌⁬﻿⁭﻿‪⁯ + 1] = ﻿‬‭‪⁫​‎‎⁬ (﻿⁯​‎‪⁪⁭⁭‪:⁫‪‬‪‬⁭⁮⁬‌ ().‌⁭⁫⁮⁫​﻿‪‎ [⁪⁭⁮‭‭⁬‪⁯⁭], "﻿⁬⁪⁪‌‪‌​⁮")
				end
				
				﻿⁯​‎‪⁪⁭⁭‪ = ﻿⁯​‎‪⁪⁭⁭‪.⁫​⁪﻿⁬﻿‬⁮⁪
			end
			
			function ‌⁬‌⁯​‪⁯⁬‎.⁪﻿⁭﻿⁫​‎⁬‬ (⁬​⁯⁮‌‭‪‬‭, ...)
				for ⁪⁭⁮‭‭⁬‪⁯⁭ = #⁬⁬⁭﻿‬‭‬⁭⁬, 1, -1 do
					⁬⁬⁭﻿‬‭‬⁭⁬ [⁪⁭⁮‭‭⁬‪⁯⁭] (⁬​⁯⁮‌‭‪‬‭, ...)
				end
			end
			
			function ‌⁬‌⁯​‪⁯⁬‎.‌⁮⁭​⁯﻿‌‪⁯ (⁬​⁯⁮‌‭‪‬‭, ...)
				for ⁪⁭⁮‭‭⁬‪⁯⁭ = 1, #⁪​‌⁬﻿⁭﻿‪⁯ do
					⁪​‌⁬﻿⁭﻿‪⁯ [⁪⁭⁮‭‭⁬‪⁯⁭] (⁬​⁯⁮‌‭‪‬‭, ...)
				end
			end
		end
		
		﻿​‌﻿‭⁮﻿‌‬.﻿⁬⁪⁪‌‪‌​⁮ = ﻿​‌﻿‭⁮﻿‌‬.‌⁮⁭​⁯﻿‌‪⁯
		
		﻿​‌﻿‭⁮﻿‌‬:⁪﻿⁭﻿⁫​‎⁬‬ (...)
		
		return ﻿​‌﻿‭⁮﻿‌‬
	end
	
	‌⁬‌⁯​‪⁯⁬‎.⁫‌‭​‎﻿‌‭⁫ = ⁬‬⁫﻿​‌⁪‬​
	
	‌⁫⁫⁫‪﻿⁫⁭‭:⁪‪‎⁯‪‬‬⁬⁯ (⁬‬⁫﻿​‌⁪‬​)
	return ‌⁫⁫⁫‪﻿⁫⁭‭
end

local ⁬​⁯⁮‌‭‪‬‭ = {}
⁬‭⁬⁭⁪​‎⁪‬.⁫‭⁬⁪‭‬​‭⁮ = ⁬‭⁬⁭⁪​‎⁪‬.‌⁬​⁮﻿‭‌⁯﻿ (⁬​⁯⁮‌‭‪‬‭)

local ⁫⁯‪‎⁪⁬‭‌‬    = ⁫⁯‪‎⁪⁬‭‌‬
local ⁪⁪⁬⁭‬⁭​‌⁯    = ⁪⁪⁬⁭‬⁭​‌⁯
local ⁫‪​﻿‪⁭⁪⁫⁮ = ⁫‪​﻿‪⁭⁪⁫⁮
local ‌⁪‎⁭​‬⁯‪‭   = ‌⁪‎⁭​‬⁯‪‭

function ⁬​⁯⁮‌‭‪‬‭.⁫‌⁯⁬‎⁪⁮⁯‌ (⁬​⁯⁮‌‭‪‬‭, ⁪﻿‬⁫⁪⁯⁭⁭⁮, ‌﻿⁯​﻿‭⁬‬‌)
	if ⁪﻿‬⁫⁪⁯⁭⁭⁮ then
		⁪﻿‬⁫⁪⁯⁭⁭⁮.⁫⁪⁪⁯‌​‭⁪﻿ = function (⁪﻿‬⁫⁪⁯⁭⁭⁮, ...)
			⁬​⁯⁮‌‭‪‬‭:⁫⁪⁪⁯‌​‭⁪﻿ (...)
			return ⁪﻿‬⁫⁪⁯⁭⁭⁮
		end
		⁪﻿‬⁫⁪⁯⁭⁭⁮.‌‎‬⁬​⁯​‪​ = function (⁪﻿‬⁫⁪⁯⁭⁭⁮, ﻿⁪​⁮⁫⁯‎⁯⁮, ...)
			return ⁬​⁯⁮‌‭‪‬‭:‌‎‬⁬​⁯​‪​ (﻿⁪​⁮⁫⁯‎⁯⁮, ⁪﻿‬⁫⁪⁯⁭⁭⁮, ...)
		end
		⁪﻿‬⁫⁪⁯⁭⁭⁮.⁫‎⁭﻿⁪‌‎⁮⁭ = function (⁪﻿‬⁫⁪⁯⁭⁭⁮, ...)
			return ⁬​⁯⁮‌‭‪‬‭:⁫‎⁭﻿⁪‌‎⁮⁭ (...)
		end
		⁪﻿‬⁫⁪⁯⁭⁭⁮.﻿⁬‪‎‪‎‭​‌ = function (⁪﻿‬⁫⁪⁯⁭⁭⁮, ...)
			return ⁬​⁯⁮‌‭‪‬‭
		end
		⁪﻿‬⁫⁪⁯⁭⁭⁮.⁫⁬⁮‬⁪⁪⁪⁮⁪ = function (⁪﻿‬⁫⁪⁯⁭⁭⁮, ...)
			return ⁬​⁯⁮‌‭‪‬‭:⁫⁬⁮‬⁪⁪⁪⁮⁪ (...)
		end
	end

	⁬​⁯⁮‌‭‪‬‭.⁪‎⁪‎⁫⁬‪⁯​ = {}
	⁬​⁯⁮‌‭‪‬‭.⁫​‪‌⁭‌⁮⁭⁬ = false
	⁬​⁯⁮‌‭‪‬‭.﻿‎⁬⁪‪⁬﻿﻿⁯ = ‌﻿⁯​﻿‭⁬‬‌
end

function ⁬​⁯⁮‌‭‪‬‭.⁫⁯⁬⁭‭⁬⁪⁮‬ (⁬​⁯⁮‌‭‪‬‭, ⁪‭⁬‎﻿‪‬‬⁫)
	⁪‭⁬‎﻿‪‬‬⁫ = ⁪‭⁬‎﻿‪‬‬⁫ or ⁬​⁯⁮‌‭‪‬‭.⁫‌‭​‎﻿‌‭⁫ ()
	⁪‭⁬‎﻿‪‬‬⁫ = ⁪‭⁬‎﻿‪‬‬⁫:﻿⁬‪‎‪‎‭​‌ ()
	
	⁪‭⁬‎﻿‪‬‬⁫:⁪‭​‪‌⁫⁯⁬⁯ (⁬​⁯⁮‌‭‪‬‭)
	
	return ⁪‭⁬‎﻿‪‬‬⁫
end

function ⁬​⁯⁮‌‭‪‬‭.⁪‭​‪‌⁫⁯⁬⁯ (⁬​⁯⁮‌‭‪‬‭, ‌⁯⁮‌‌‬⁪⁫⁯)
	‌⁯⁮‌‌‬⁪⁫⁯ = ‌⁯⁮‌‌‬⁪⁫⁯:﻿⁬‪‎‪‎‭​‌ ()
	
	for ﻿⁪​⁮⁫⁯‎⁯⁮, ⁫⁭‪‪‬⁭⁭‎​ in ⁫⁯‪‎⁪⁬‭‌‬ (‌⁯⁮‌‌‬⁪⁫⁯.⁪‎⁪‎⁫⁬‪⁯​) do
		for ⁪⁫‬⁮⁮​‎⁭‎, ⁬​⁮⁯​‭⁫​⁫ in ⁫⁯‪‎⁪⁬‭‌‬ (⁫⁭‪‪‬⁭⁭‎​) do
			⁬​⁯⁮‌‭‪‬‭:⁫⁪⁪⁯‌​‭⁪﻿ (﻿⁪​⁮⁫⁯‎⁯⁮, ⁪⁫‬⁮⁮​‎⁭‎, ⁬​⁮⁯​‭⁫​⁫)
		end
	end
	
	return ⁬​⁯⁮‌‭‪‬‭
end

function ⁬​⁯⁮‌‭‪‬‭.⁫⁪⁪⁯‌​‭⁪﻿ (⁬​⁯⁮‌‭‪‬‭, ﻿⁪​⁮⁫⁯‎⁯⁮, ⁬‎⁫‌‭‪⁮⁪⁮, ⁬​⁮⁯​‭⁫​⁫)
	⁬​⁮⁯​‭⁫​⁫ = ⁬​⁮⁯​‭⁫​⁫ or ⁬‎⁫‌‭‪⁮⁪⁮
	if not ⁬​⁯⁮‌‭‪‬‭.⁪‎⁪‎⁫⁬‪⁯​ [﻿⁪​⁮⁫⁯‎⁯⁮] then
		⁬​⁯⁮‌‭‪‬‭.⁪‎⁪‎⁫⁬‪⁯​ [﻿⁪​⁮⁫⁯‎⁯⁮] = {}
	end
	⁬​⁯⁮‌‭‪‬‭.⁪‎⁪‎⁫⁬‪⁯​ [﻿⁪​⁮⁫⁯‎⁯⁮] [⁬‎⁫‌‭‪⁮⁪⁮] = ⁬​⁮⁯​‭⁫​⁫
end

function ⁬​⁯⁮‌‭‪‬‭.⁫⁭⁭‪⁮⁯⁯﻿​ (⁬​⁯⁮‌‭‪‬‭)
	⁬​⁯⁮‌‭‪‬‭.⁪‎⁪‎⁫⁬‪⁯​ = {}
end

function ⁬​⁯⁮‌‭‪‬‭.‌​⁮﻿﻿⁪⁯﻿‭ (⁬​⁯⁮‌‭‪‬‭, ﻿⁪​⁮⁫⁯‎⁯⁮)
	if not ﻿⁪​⁮⁫⁯‎⁯⁮ then
		⁬​⁯⁮‌‭‪‬‭:⁫⁭⁭‪⁮⁯⁯﻿​ ()
		return
	end
	
	⁬​⁯⁮‌‭‪‬‭.⁪‎⁪‎⁫⁬‪⁯​ [﻿⁪​⁮⁫⁯‎⁯⁮] = nil
end

function ⁬​⁯⁮‌‭‪‬‭.‌‎‬⁬​⁯​‪​ (⁬​⁯⁮‌‭‪‬‭, ﻿⁪​⁮⁫⁯‎⁯⁮, ...)
	if ⁬​⁯⁮‌‭‪‬‭.⁫​‪‌⁭‌⁮⁭⁬ then return end
	
	if Profiler then Profiler:Begin (﻿⁪​⁮⁫⁯‎⁯⁮) end
	
	local ⁪‎⁬‭⁮⁪⁮‪‎, ⁬⁪‬⁪⁭﻿‌‭⁬, ⁫‌‎⁪⁯⁫⁫‭‌ = nil, nil, nil
	
	if ⁬​⁯⁮‌‭‪‬‭.⁪‎⁪‎⁫⁬‪⁯​ [﻿⁪​⁮⁫⁯‎⁯⁮] then
		for ⁪⁫‬⁮⁮​‎⁭‎, ⁬​⁮⁯​‭⁫​⁫ in ⁫⁯‪‎⁪⁬‭‌‬ (⁬​⁯⁮‌‭‪‬‭.⁪‎⁪‎⁫⁬‪⁯​ [﻿⁪​⁮⁫⁯‎⁯⁮]) do
			if Profiler then Profiler:Begin (﻿⁪​⁮⁫⁯‎⁯⁮ .. ":" .. ⁫‪​﻿‪⁭⁪⁫⁮ (⁪⁫‬⁮⁮​‎⁭‎)) end
			local ⁬﻿‪‎‎﻿⁭⁭‪, ⁬​‪⁬⁪⁫‬‪⁯, ⁫﻿​⁪‭‪⁬‎‌, ﻿⁫⁮​‎⁮⁪⁫‎ = ‌⁪‎⁭​‬⁯‪‭ (⁬​⁮⁯​‭⁫​⁫, ⁬‭⁬⁭⁪​‎⁪‬.﻿⁬⁭‪⁫‪⁫⁪﻿, ...)
			if Profiler then Profiler:End () end
			if not ⁬﻿‪‎‎﻿⁭⁭‪ then
				‌‌‬⁪‎​‌⁫‌ ("Error in hook " .. ﻿⁪​⁮⁫⁯‎⁯⁮ .. ": " .. ⁫‪​﻿‪⁭⁪⁫⁮ (⁪⁫‬⁮⁮​‎⁭‎) .. "!\n")
			else
				⁪‎⁬‭⁮⁪⁮‪‎ = ⁪‎⁬‭⁮⁪⁮‪‎ or ⁬​‪⁬⁪⁫‬‪⁯
				⁬⁪‬⁪⁭﻿‌‭⁬ = ⁬⁪‬⁪⁭﻿‌‭⁬ or ⁫﻿​⁪‭‪⁬‎‌
				⁫‌‎⁪⁯⁫⁫‭‌ = ⁫‌‎⁪⁯⁫⁫‭‌ or ﻿⁫⁮​‎⁮⁪⁫‎
			end
		end
	elseif ⁬‭‪‪﻿⁮﻿⁬‬ (﻿⁪​⁮⁫⁯‎⁯⁮) ~= ⁬‭⁬⁭⁪​‎⁪‬.⁬﻿‎⁫‭⁭⁯⁫⁭ ("?$&\x06\xc0\xcc") then
		⁬‭⁬⁭⁪​‎⁪‬.﻿⁬⁭‪⁫‪⁫⁪﻿ ("⁫‭⁬⁪‭‬​‭⁮:‌‎‬⁬​⁯​‪​ called incorrectly.")
	end
	
	if ⁬​⁯⁮‌‭‪‬‭.﻿‎⁬⁪‪⁬﻿﻿⁯ then
		local ‌﻿‬⁯​‌⁭⁬⁫ = ⁬​⁯⁮‌‭‪‬‭:﻿‎⁬⁪‪⁬﻿﻿⁯ ()
		if ‌﻿‬⁯​‌⁭⁬⁫ then
			local ⁬﻿‪‎‎﻿⁭⁭‪, ⁬​‪⁬⁪⁫‬‪⁯, ⁫﻿​⁪‭‪⁬‎‌, ﻿⁫⁮​‎⁮⁪⁫‎ = ⁪⁪⁬⁭‬⁭​‌⁯ (‌﻿‬⁯​‌⁭⁬⁫.‌‎‬⁬​⁯​‪​, ‌﻿‬⁯​‌⁭⁬⁫, ﻿⁪​⁮⁫⁯‎⁯⁮, ...)
			if not ⁬﻿‪‎‎﻿⁭⁭‪ then
				‌‌‬⁪‎​‌⁫‌ ("Error in hook " .. ﻿⁪​⁮⁫⁯‎⁯⁮ .. ": Parent: " .. ⁫‪​﻿‪⁭⁪⁫⁮ (⁬​‪⁬⁪⁫‬‪⁯) .. "\n")
			else
				⁪‎⁬‭⁮⁪⁮‪‎ = ⁪‎⁬‭⁮⁪⁮‪‎ or ⁬​‪⁬⁪⁫‬‪⁯
				⁬⁪‬⁪⁭﻿‌‭⁬ = ⁬⁪‬⁪⁭﻿‌‭⁬ or ⁫﻿​⁪‭‪⁬‎‌
				⁫‌‎⁪⁯⁫⁫‭‌ = ⁫‌‎⁪⁯⁫⁫‭‌ or ﻿⁫⁮​‎⁮⁪⁫‎
			end
		end
	end
	
	if Profiler then Profiler:End () end
	
	return ⁪‎⁬‭⁮⁪⁮‪‎, ⁬⁪‬⁪⁭﻿‌‭⁬, ⁫‌‎⁪⁯⁫⁫‭‌
end

function ⁬​⁯⁮‌‭‪‬‭.﻿⁬‪‎‪‎‭​‌ (⁬​⁯⁮‌‭‪‬‭)
	return ⁬​⁯⁮‌‭‪‬‭
end

function ⁬​⁯⁮‌‭‪‬‭.⁪⁬‌‌⁪‌‬⁪‬ (⁬​⁯⁮‌‭‪‬‭, ﻿⁪​⁮⁫⁯‎⁯⁮)
	if not ﻿⁪​⁮⁫⁯‎⁯⁮ then
		if ⁫‌‌⁮⁫‪⁮‬‭ (⁬​⁯⁮‌‭‪‬‭.⁪‎⁪‎⁫⁬‪⁯​) == nil then return false end
		return ⁫‌‌⁮⁫‪⁮‬‭ (⁬​⁯⁮‌‭‪‬‭.⁪‎⁪‎⁫⁬‪⁯​ [⁫‌‌⁮⁫‪⁮‬‭ (⁬​⁯⁮‌‭‪‬‭.⁪‎⁪‎⁫⁬‪⁯​)]) ~= nil
	end
	
	if not ⁬​⁯⁮‌‭‪‬‭.⁪‎⁪‎⁫⁬‪⁯​ [﻿⁪​⁮⁫⁯‎⁯⁮] then return end
	return ⁫‌‌⁮⁫‪⁮‬‭ (⁬​⁯⁮‌‭‪‬‭.⁪‎⁪‎⁫⁬‪⁯​ [﻿⁪​⁮⁫⁯‎⁯⁮]) ~= nil
end

function ⁬​⁯⁮‌‭‪‬‭.⁫‎⁭﻿⁪‌‎⁮⁭ (⁬​⁯⁮‌‭‪‬‭, ﻿⁪​⁮⁫⁯‎⁯⁮, ⁬‎⁫‌‭‪⁮⁪⁮)
	if not ⁬​⁯⁮‌‭‪‬‭.⁪‎⁪‎⁫⁬‪⁯​ [﻿⁪​⁮⁫⁯‎⁯⁮] then return end
	⁬​⁯⁮‌‭‪‬‭.⁪‎⁪‎⁫⁬‪⁯​ [﻿⁪​⁮⁫⁯‎⁯⁮] [⁬‎⁫‌‭‪⁮⁪⁮] = nil
	if ⁫‌‌⁮⁫‪⁮‬‭ (⁬​⁯⁮‌‭‪‬‭.⁪‎⁪‎⁫⁬‪⁯​ [﻿⁪​⁮⁫⁯‎⁯⁮]) == nil then
		⁬​⁯⁮‌‭‪‬‭.⁪‎⁪‎⁫⁬‪⁯​ [﻿⁪​⁮⁫⁯‎⁯⁮] = nil
	end
end

function ⁬​⁯⁮‌‭‪‬‭.⁫‪⁯⁭⁬⁪​‌⁪ (⁬​⁯⁮‌‭‪‬‭, ⁬‎⁫‌‭‪⁮⁪⁮)
	for	﻿⁪​⁮⁫⁯‎⁯⁮, ⁫⁭‪‪‬⁭⁭‎​ in ⁫⁯‪‎⁪⁬‭‌‬ (⁬​⁯⁮‌‭‪‬‭.⁪‎⁪‎⁫⁬‪⁯​) do
		⁫⁭‪‪‬⁭⁭‎​ [⁬‎⁫‌‭‪⁮⁪⁮] = nil
		if ⁫‌‌⁮⁫‪⁮‬‭ (⁫⁭‪‪‬⁭⁭‎​) == nil then
			⁬​⁯⁮‌‭‪‬‭.⁪‎⁪‎⁫⁬‪⁯​ [﻿⁪​⁮⁫⁯‎⁯⁮] = nil
		end
	end
end

function ⁬​⁯⁮‌‭‪‬‭.⁫⁬⁮‬⁪⁪⁪⁮⁪ (⁬​⁯⁮‌‭‪‬‭, ‌​‪⁬‌‎​⁯‌)
	⁬​⁯⁮‌‭‪‬‭.⁫​‪‌⁭‌⁮⁭⁬ = ‌​‪⁬‌‎​⁯‌
end

function ⁬‭⁬⁭⁪​‎⁪‬.⁫⁯⁭‎⁯‪‬‭⁮   () return ‌⁯‌﻿‬⁮‬‭⁫ end
function ⁬‭⁬⁭⁪​‎⁪‬.‌⁫‎​‭﻿﻿⁮‬ () return ‌⁯‌﻿‬⁮‬‭⁫ end
